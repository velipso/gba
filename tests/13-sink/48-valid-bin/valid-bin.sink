def N a
  if (pickle.valid list.str a) != nil
    say "fail: expecting invalid\n> \"$a\""
  end
end

def Y a
  if (pickle.valid list.str a) != 2
    say "fail: expecting bin\n> \"$a\""
  end
end

N {}
N { 0x01 }
N { 0x01, 0x00 }
Y { 0x01, 0x00, 0xF7 }
N { 0x01, 0x00, 0xF7, 0x00 }
Y { 0x01, 0x02, 0x01, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF9, 0x04, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x01, 0x01, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF9, 0x04, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x02, 0x02, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF9, 0x04, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x02, 0x01, 0x61, 0xFF, 0x61, 0x62, 0x63, 0x64, 0xF9, 0x04, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x02, 0x01, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF8, 0x04, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x02, 0x01, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF9, 0x05, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x02, 0x01, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF8, 0x04, 0xF8, 0x0F, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x02, 0x01, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF8, 0x04, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x02, 0xF8, 0x01, 0xF8, 0x00 }
N { 0x01, 0x02, 0x01, 0x61, 0x04, 0x61, 0x62, 0x63, 0x64, 0xF8, 0x04, 0xF8, 0x00, 0xF9, 0x01, 0xF0,
  0x00, 0xF8, 0x01, 0xF9, 0x00 }
Y { 0x01, 0x00, 0xF9, 0x02, 0xF9, 0x01, 0xF1, 0x06, 0xFA, 0x00 }
Y { 0x01, 0x00, 0xF9, 0x02, 0xF9, 0x01, 0xF1, 0x06, 0xFA, 0x01 }
N { 0x01, 0x00, 0xF9, 0x02, 0xF9, 0x01, 0xF1, 0x06, 0xFA, 0x02 }
Y { 0x01, 0x00, 0xF0, 0x00 }
Y { 0x01, 0x00, 0xF1, 0x00 }
Y { 0x01, 0x00, 0xF2, 0x00, 0x00 }
Y { 0x01, 0x00, 0xF3, 0x00, 0x00 }
Y { 0x01, 0x00, 0xF4, 0x00, 0x00, 0x00, 0x00 }
Y { 0x01, 0x00, 0xF5, 0x00, 0x00, 0x00, 0x00 }
Y { 0x01, 0x00, 0xF6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF0, 0x00, 0x00 }
N { 0x01, 0x00, 0xF1, 0x00, 0x00 }
N { 0x01, 0x00, 0xF2, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF3, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF4, 0x00, 0x00, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF5, 0x00, 0x00, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF0 }
N { 0x01, 0x00, 0xF1 }
N { 0x01, 0x00, 0xF2, 0x00 }
N { 0x01, 0x00, 0xF3, 0x00 }
N { 0x01, 0x00, 0xF4, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF5, 0x00, 0x00, 0x00 }
N { 0x01, 0x00, 0xF6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
